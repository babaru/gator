<%= simple_form_for(@product, html: { class: 'form-horizontal' }) do |f| %>
  <%= f.error_notification %>

<div class="row">
    <div class="col-lg-6">
      <%= f.simple_fields_for :staff do |pm| %>
        <%= pm.input :name, input_html: {autocomplete: 'off'}, label: t('activerecord.attributes.product.staff'), disabled: !can?(:manage_customer_service_info, Product) %>
        <%= pm.input :id, as: :hidden %>
      <% end %>
        <%= f.input :name, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :short_name, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :code, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :client_code, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :initial_fund, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :investment_scope, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
    </div>
    <div class="col-lg-6">
        <%= f.input :category, collection: Product.categories, as: :radio_buttons, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :rd_category, collection: Product.rd_categories, as: :radio_buttons, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :status, collection: Product.statuses, as: :radio_buttons, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :liquidated_at, as: :date_picker, disabled: !can?(:manage_customer_service_info, Product) %>
    </div>
</div>

<div class="hr-line-dashed"></div>

<div class="row">
    <div class="col-lg-6">
    <%= f.input :is_one_to_many, as: :radio_buttons, disabled: !can?(:manage_customer_service_info, Product) %>
    <%= f.input :is_structured, as: :radio_buttons, disabled: !can?(:manage_customer_service_info, Product) %>
    </div>
    <div class="col-lg-6">
    <%= f.input :leverage, disabled: !can?(:manage_customer_service_info, Product) %>
    <%= f.input :superior_code, disabled: !can?(:manage_customer_service_info, Product) %>
    <%= f.input :inferior_code, disabled: !can?(:manage_customer_service_info, Product) %>
    </div>
</div>

<div class="hr-line-dashed"></div>

<div class="row">
    <div class="col-lg-6">
      <%= f.input :deposited_at, as: :date_picker, disabled: !can?(:manage_customer_service_info, Product) %>
    </div>
    <div class="col-lg-6">
      <%= f.input :put_on_record_at, as: :date_picker, disabled: !can?(:manage_customer_service_info, Product) %>
    </div>
</div>

<div class="hr-line-dashed"></div>


<div class="row">
    <div class="col-lg-6">
        <%= f.input :delegation_started_at, as: :date_picker, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :contract_profit_ratio, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :trustor_name, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :trustor_bank_name, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :trustor_bank_account_name, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :trustor_bank_account_number, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
    </div>
    <div class="col-lg-6">
        <%= f.input :delegation_ended_at, as: :date_picker, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :delegation_duration, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :spec_profit_ratio, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :valuation_out_sourcing, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
    </div>
</div>

<div class="hr-line-dashed"></div>

<div class="row">
    <div class="col-lg-6">
        <%= f.input :fee_calculation_standard, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :trustor_fee_ratio, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :operation_fee_ratio, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :bonus, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :sales_fee_ratio, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
    </div>
    <div class="col-lg-6">
        <%= f.input :year_day_count, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :management_fee_ratio, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :management_fee_flour, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :consultant_fee_ratio, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
        <%= f.input :consultant_fee_flour, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_customer_service_info, Product) %>
    </div>
</div>

<div class="hr-line-dashed"></div>

<div class="row">
    <div class="col-lg-6">
      <%= f.simple_fields_for :sales_department do |department| %>
        <%= department.input :name, input_html: {autocomplete: 'off'}, label: t('activerecord.attributes.product.sales_department'), disabled: !can?(:manage_customer_service_info, Product) %>
        <%= department.input :id, as: :hidden %>
      <% end %>
      <%= f.simple_fields_for :consultant do |consultant| %>
        <%= consultant.input :name, input_html: {autocomplete: 'off'}, label: t('activerecord.attributes.product.consultant'), disabled: !can?(:manage_customer_service_info, Product) %>
        <%= consultant.input :id, as: :hidden %>
      <% end %>
    </div>
    <div class="col-lg-6">
      <%= f.simple_fields_for :operation_department do |department| %>
        <%= department.input :name, input_html: {autocomplete: 'off'}, label: t('activerecord.attributes.product.operation_department'), disabled: !can?(:manage_customer_service_info, Product) %>
        <%= department.input :id, as: :hidden %>
      <% end %>
    </div>
</div>

<div class="hr-line-dashed"></div>

<div class="row">
    <div class="col-lg-6">
        <%= f.input :securities_broker_name, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>
        <%= f.input :securities_broker_account_name, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>
        <%= f.input :securities_broker_account_number, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>
        <%= f.input :szse_gateway, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>
        <%= f.input :dce_gateway, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>

    </div>
    <div class="col-lg-6">
      <%= f.input :sse_account_code, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>
      <%= f.input :szse_account_code, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>
      <%= f.input :cffex_account_code, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>
      <%= f.input :zce_account_code, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>
      <%= f.input :dce_account_code, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>
      <%= f.input :shfe_account_code, input_html: {autocomplete: 'off'}, disabled: !can?(:manage_asset_management_info, Product) %>
    </div>
</div>

<div class="hr-line-dashed"></div>

<div class="row">
    <div class="col-lg-6">
      <%= f.input :tag_names, input_html: { data: { role: 'tagsinput' } } %>
    </div>
    <div class="col-lg-6">
        <%= f.input :remarks %>
    </div>
</div>

<div class="hr-line-dashed"></div>

<div class="form-group">
    <div class="pull-right m-r-md">
        <%= f.submit t('buttons.save'), class: 'btn btn-primary btn-w-m' %>
    </div>
    <div class="m-l-md">
      <%= link_to t('buttons.back'), products_path, class: 'btn btn-white' %>
    </div>
</div>
<% end %>

<%= javascript_include_tag 'bootstrap-tagsinput/bootstrap-tagsinput', 'data-turbolinks-track' => true %>

<script type="text/javascript">

  $.get('/staffs.json', function(data) {
    $('#product_staff_attributes_name').typeahead({
      source: data
    }).change(function() {
      var current = $(this).typeahead("getActive");
      if (current) {
        if (current.name == $(this).val()) {
          $('#product_staff_attributes_id').val(current.id);
        }
      }
    });
  });

  $.get('/departments.json', function(data) {
    $('#product_sales_department_attributes_name').typeahead({
      source: data
    }).change(function() {
      var current = $(this).typeahead("getActive");
      if (current) {
        if (current.name == $(this).val()) {
          $('#product_sales_department_attributes_id').val(current.id);
        }
      }
    });

    $('#product_operation_department_attributes_name').typeahead({
      source: data
    }).change(function() {
      var current = $(this).typeahead("getActive");
      if (current) {
        if (current.name == $(this).val()) {
          $('#product_operation_department_attributes_id').val(current.id);
        }
      }
    });

    $('#product_consultant_reference_department_attributes_name').typeahead({
      source: data
    }).change(function() {
      var current = $(this).typeahead("getActive");
      if (current) {
        if (current.name == $(this).val()) {
          $('#product_consultant_reference_department_attributes_id').val(current.id);
        }
      }
    });
  });

  $.get('/consultants.json', function(data) {
    $('#product_consultant_attributes_name').typeahead({
      source: data
    }).change(function() {
      var current = $(this).typeahead("getActive");
      if (current) {
        if (current.name == $(this).val()) {
          $('#product_consultant_attributes_id').val(current.id);
        }
      }
    });
  });


</script>
